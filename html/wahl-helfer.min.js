(function(){var t,n,e,r,i,a,s,o,c,u,l,f,d,h,p,v,m,g,y,E,N;s=null,E=null,N=null,l=null,n=function(n,e,r){var i;return i=isNaN(e)?"":`${(100*e).toFixed(2)}%`,t("li",{class:"list-group-item"},[t("div",{class:"row"},[t("div",{class:"col-6"},[t("p",{class:"my-0"},[n.short_name]),t("small",{class:"text-muted"},[n.full_name])]),t("div",{class:"col-6"},[t("div",{class:"bg-primary pb-4",style:`width:${isNaN(e)?"0%":i};`}),t("output",{class:""},[i])])])])},o=function(t){return document.getElementById(t)},t=function(t,n,e){var r,i,a,s,o,c;if(i=document.createElement(t),n)for(s in n)c=n[s],i.setAttribute(s,c);if(e)for(a=0,o=e.length;a<o;a++)"object"!=typeof(r=e[a])&&(r=document.createTextNode(r)),i.appendChild(r);return i},f=function(t){var n;for(n=[];t.hasChildNodes();)n.push(t.removeChild(t.lastChild));return n},y=function(){var t,e,r;return t=s.theses.reduce(function(t,n,e){return t+(4===E[e]?0:N[e])},0),s.parties.forEach(function(n,e){var r,i;return i=s.theses.reduce(function(t,e,r){var i,a,s,o,c;return s=E[r],o=N[r],i={"+":3,"-":1,"~":2}[n.positions[r]],a=4===s?0:(2-Math.abs(s-i))/2,c=a*o,t+c},0),r=i/t,l[e]=r}),(r=l.map(function(t,n){return{ratio:t,index:n}})).sort(function(t,n){return n.ratio-t.ratio}),e=o("parties"),f(e),r.forEach(function(t,r){var i;return i=s.parties[t.index],e.appendChild(n(i,t.ratio))})},h=function(t,n){if(E[t]!==n)return E[t]=n,y()},p=function(t,n){if(N[t]!==n)return N[t]=n,y()},a=function(n){var e,r,i,a,s;return r=`thesis_${n}-weight`,e=t("input",{type:"range",min:0,max:100,step:"1",id:r,value:10}),i=t("output"),a=function(){return i.value=Number(e.value)},(s=function(){return p(n,a())})(),e.addEventListener("input",a),e.addEventListener("change",s),t("div",{class:"col-12 col-sm-6"},[t("label",{for:r},["Gewichtung:"]),i,e])},e=function(n,e,r,i){var a,s,o,c;return s=4===e,a={class:"form-check-input",type:"radio",name:n,value:e},s&&(a.checked="",i(e)),o=t("input",a,[]),(c=t("div",{class:"form-check form-check-inline"},[t("label",{class:"form-check-label"},[o,r])])).addEventListener("change",function(){if(o.checked)return i(e)}),c},i=function(n){var r,i;return r=`thesis_${n}-position`,i=function(t){return h(n,t)},t("div",{class:"col-12 col-sm-6"},[e(r,3,"Ja",i),e(r,2,"Neutral",i),e(r,1,"Nein",i),e(r,4,"Ignorieren",i)])},r=function(n,e,r){return t("div",{class:"card my-2"},[t("div",{class:"card-header bg-secondary text-white"},[t("strong",{},[e+1]),"/",r,": ",t("strong",{},[n.topic])]),t("div",{class:"card-body py-0"},[t("p",{class:"card-text h5 py-2"},[n.statement])]),t("div",{class:"card-footer"},[t("div",{class:"row"},[i(e),a(e)])])])},v=function(t){var n,e;return s=t,n=t.theses.length,E=Array(n).fill(4),N=Array(n).fill(10),l=Array(t.parties.length).fill(NaN),e=o("theses"),f(e),t.theses.forEach(function(t,n,i){var a;return a=r(t,n,i.length),e.appendChild(a)}),y()},u=function(t){return new Promise(function(n,e){var r;(r=new XMLHttpRequest).onload=function(){200===r.status?n(r.response):e(Error(r.statusText))},r.onerror=function(){e(Error("Network Error"))},r.open("GET",t,!0),r.send(null)})},c=function(t){return u(t).then(JSON.parse)},g=function(t){return c(t).then(v)},m=function(t){return g(`wahlen/${t}.json`)},d={},location.search.substr(1).split("&").forEach(function(t){var n,e;return[n,e]=t.split("="),d[n]=e}),m(d.wahl)}).call(this);
